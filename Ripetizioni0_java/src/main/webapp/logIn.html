<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ripetizioni</title>
        <link rel="icon" href="icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,700">
        <link rel="stylesheet" href="style.css">
    </head>

    <header>
        <div>
            <div class="header-dark">
                <nav class="navbar navbar-dark navbar-expand-md navigation-clean-search">
                    <div class="container"><a class="navbar-brand" href="index.html">Ripetizioni</a>
                        <div class="collapse navbar-collapse"
                            id="navcol-1">
                            <ul class="nav navbar-nav form-inline mr-auto">
                                <li class="nav-item" role="presentation"><a class="nav-link" href="index.html">Prenota</a></li>
                            </ul>
<!--                            <span class="navbar-text"><a href="#" class="login">Log In</a></span>-->
<!--                            <button class="btn-prenota btn">Sign Up</button>-->
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <body class="test-body">
        <div>
            <div class="container">
                <label><b>Username</b></label>
                <input id="email" type="text" placeholder="Enter Username" name="uname" required>

                <label><b>Password</b></label>
                <input id="password" type="password" placeholder="Enter Password" name="psw" required>

                <button onclick="onLogInClick()">Login</button>
                <label>
                    <input type="checkbox" checked="checked" name="remember"> Remember me
                </label>
            </div>

            <div class="container" style="background-color:#f1f1f1">
                <button type="button" class="cancelbtn">Cancel</button>
                <span class="psw">Forgot <a href="#">password?</a></span>
            </div>
        </div>


        <script>
            function onLogInClick(){
                let emailInput = document.getElementById("email");
                let passwordInput = document.getElementById("password");

                $.post('logIn', { email: emailInput.value, password: passwordInput.value }, function(data){
                    //console.log(data + " " + (data == 'authenticated') + " " + (data.toString( == "authenticated") + " " + data.response);
                    if(data === 'authenticated'){
                        console.log(document.cookie + " " + data);
                        location.href = "index.html";
                    }else{
                        console.log("Authentication failed");
                    }
                });
            }

            // new Vue ({
            //     el: '#app',
            //     data: {
            //         account:  'guest',
            //         link :    '/SwebVueSessioniUtente/ServletSessions'
            //     },
            //     methods:{
            //         getInfo:function(){
            //             var self = this;
            //             if (self.sessione==='sessione inesistente')
            //                 $.post(this.link, {utente: this.account}, function (data) {
            //                     self.sessione = data;
            //                 });
            //             else
            //                 $.post(this.link, {utente: this.account, sessione: this.sessione},
            //                     function (data) {
            //                         self.altreInfo = data;
            //                     });
            //         }
            //     }
            // });
        </script>
    </body>
</html>
